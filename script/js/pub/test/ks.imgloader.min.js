!function (a) {
	"function" == typeof define ? define(a) : a("", window.ue = window.ue || {}, "")
}
(function (a, b, c) {
	function d(a) {
		if (this.constructor !== d)
			return new d(a);
		var b = {
			list : [],
			start : 0,
			end : 0,
			timeout : 2e4,
			onloaded : e,
			onperloaded : e,
			ontimeout : e
		};
		a.length <= a.end && (a.end = a.length - 1),
		this.options = a = $.extend(b, a),
		this.init()
	}
	var e = function () {};
	d.prototype = {
		constructor : d,
		init : function () {
			var a = this,
			b = 0;
			options = this.options;
			for (var c = options.start; c <= options.end; c++) {
				if ("loading" == options.list[c].status) {
					if (new Date - options.list[c].starttime < options.timeout)
						continue;
					options.list[c].status = "ready"
				}
				"loaded" != options.list[c].status ? (options.list[c].status = "loading", options.list[c].starttime = new Date, f(options.list[c].src, e, function (b) {
						return function () {
							options.list[b].status = "loaded",
							options.onperloaded.call(a, b)
						}
					}
						(c))) : options.onperloaded.call(a, c)
			}
			this.timeout_timer = setTimeout(function () {
					options.ontimeout.call(a)
				}, options.timeout),
			this.loaded_timer = setInterval(function () {
					b = 0;
					for (var c = options.start; c <= options.end; c++)
						"loaded" == options.list[c].status && b++;
					b === options.end - options.start + 1 && (clearTimeout(a.loaded_timer), clearTimeout(a.timeout_timer), options.onloaded.call(a))
				}, 200)
		}
	};
	var f = function () {
		var a = [],
		b = null,
		c = function () {
			for (var b = 0; b < a.length; b++)
				a[b].end ? a.splice(b--, 1) : a[b]();
			!a.length && d()
		},
		d = function () {
			clearInterval(b),
			b = null
		};
		return function (d, e, f, g) {
			var h,
			i,
			j,
			k,
			l,
			m = new Image;
			return m.src = d,
			m.complete ? (e.call(m), void(f && f.call(m))) : (i = m.width, j = m.height, m.onerror = function () {
				g && g.call(m),
				h.end = !0,
				m = m.onload = m.onerror = null
			}, h = function () {
				k = m.width,
				l = m.height,
				(k !== i || l !== j || k * l > 1024) && (e.call(m), h.end = !0)
			}, h(), m.onload = function () {
				!h.end && h(),
				f && f.call(m),
				m = m.onload = m.onerror = null
			}, void(h.end || (a.push(h), null === b && (b = setInterval(c, 40)))))
		}
	}
	();
	"[object Object]" == {}

	.toString.call(c) ? c.exports = d : b.imgloader = d
});
