!function (a) {
	"function" == typeof define ? define(a) : a("", window.ue = window.ue || {}, "")
}
(function (a, b, c) {
	function d(a) {
		return a.replace(/</g, "&lt;").replace(/>/g, "&gt;")
	}
	function e(a) {
		if (this.constructor !== e)
			return new e(a);
		var b = {
			form : "",
			input : "",
			target : "",
			items : "",
			currentClass : "cur",
			auto : !0,
			hideonblur : !0,
			hideonselect : !1,
			placeholder : "搜索游戏",
			defaultvalue : "请输入关键字",
			handle : f,
			onSelecting : f,
			onSelected : function () {},
			onSubmit : f,
			onError : f
		};
		this.options = a = $.extend(b, a),
		this.init()
	}
	var f = function () {
		return !0
	},
	g = {
		37 : "LEFT",
		38 : "UP",
		39 : "RIGHT",
		40 : "DOWN",
		13 : "ENTER",
		32 : "SPACE"
	};
	e.prototype = {
		constructor : e,
		init : function () {
			var a = this;
			a.last_key_time = new Date,
			a.current = -1,
			a.bind()
		},
		bind : function () {
			var a = this,
			b = a.options;
			"" !== $.trim($(b.input).val()) ? b.defaultvalue = "" : $(b.input).val(b.defaultvalue ? b.defaultvalue : b.placeholder),
			$(b.form).bind("submit", function (c) {
				var d = $.trim($(b.input).val());
				if ("" == d || b.placeholder == d) {
					if ($(b.input)[0].focus(), b.onError.call(a, "blankError") === !1)
						return !1;
					$(b.input).val(b.defaultvalue || b.placeholder)
				}
				return b.onSubmit.call(a, c) === !1 ? !1 : !0
			}),
			$(b.input).bind("focus keydown keypress", function (c) {
				c.keyName = g[c.keyCode];
				var d = $(b.items).length;
				if ("ENTER" === c.keyName) {
					if (-1 !== a.current) {
						if (new Date - a.last_key_time < 300 || "keypress" === c.type)
							return !1;
						a.last_key_time = new Date,
						0 == $(b.items).eq(a.current).find("a").length ? $(b.items).eq(a.current).trigger("click") : $(b.items).eq(a.current).find("a")[0].click(),
						$(b.input).trigger("blur")
					}
				} else {
					if ("UP" === c.keyName && a.open)
						return "keypress" === c.type && new Date - a.last_key_time < 150 || new Date - a.last_key_time < 200 ? !1 : (a.last_key_time = new Date, 0 >= d ? !1 : ($(b.items).removeClass(b.currentClass), a.current--, -1 == a.current ? b.auto && $(b.input).val(a._key) : (-2 == a.current && (a.current = d - 1), $(b.items).eq(a.current).addClass(b.currentClass), b.auto && $(b.input).val($(b.items).eq(a.current).attr("data-value"))), b.onSelecting.call(a, $(b.items).eq(a.current)), c.preventDefault(), c.stopPropagation(), !1));
					if ("DOWN" === c.keyName && a.open)
						return "keypress" === c.type && new Date - a.last_key_time < 150 || new Date - a.last_key_time < 200 ? !1 : (a.last_key_time = new Date, 0 >= d ? !1 : ($(b.items).removeClass(b.currentClass), a.current++, a.current == d ? (b.auto && $(b.input).val(a._key), a.current = -1) : (-2 == a.current && (a.current = 0), $(b.items).eq(a.current).addClass(b.currentClass), b.auto && $(b.input).val($(b.items).eq(a.current).attr("data-value"))), b.onSelecting.call(a, $(b.items).eq(a.current)), c.preventDefault(), c.stopPropagation(), !1));
					if ("focus" === c.type) {
						var e = $(this).val();
						if ($.trim(e) == b.defaultvalue || $.trim(e) == b.placeholder)
							return $(this).val(""), !1;
						a.handleSearch()
					}
				}
			}).bind("blur", function () {
				b.hideonblur && setTimeout(function () {
					a.hide.call(a)
				}, 200),
				"" == $.trim($(this).val()) && $(this).val(b.defaultvalue || b.placeholder)
			});
			var c = "input";
			$.browser.msie && $.browser.version < 9 && (c = "propertychange"),
			$(b.input).bind(c, function () {
				var c = $(this).val();
				$.trim(c) != b.defaultvalue && $.trim(c) != b.placeholder && a.handleSearch()
			})
		},
		hide : function () {
			var a = this,
			b = a.options;
			a.open = !1,
			$(b.target).hide()
		},
		show : function (a) {
			var b = this,
			c = b.options;
			b.open = !0,
			$(c.target).html(a),
			$(c.items).unbind("click").bind("click", function () {
				return c.hideonselect && b.hide(),
				c.onSelected.call(b, $(this)) === !1 ? !1 : c.onSelected.call(b, $(this)) === !0 ? ($(c.input).val($(this).attr("data-value")), !0) : ($(c.input).val($(this).attr("data-value")), void $(c.form).trigger("submit"))
			}),
			$(c.items).unbind("mouseenter mouseleave").bind("mouseenter", function () {
				$(c.items).removeClass(c.currentClass),
				$(this).addClass(c.currentClass)
			}).bind("mouseleave", function () {
				$(c.items).removeClass(c.currentClass)
			}),
			$(c.target).show()
		},
		handleSearch : function () {
			var a = this,
			b = a.options,
			c = d($.trim($(b.input).val()));
			a._key = c,
			a.current = -1,
			b.handle.call(a, c)
		}
	},
	"[object Object]" == {}

	.toString.call(c) ? c.exports = e : b.autocomplete = e
});
